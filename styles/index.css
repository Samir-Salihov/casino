:root{
  --bg:#0b0f1a;
  --surface:#121829;
  --surface-2:#0f1422;
  --text:#e9f0ff;
  --muted:#9fb1d1;
  --primary:#2f7df6;
  --danger:#e05656;
  --ok:#29c07e;
  --border:#223055;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --radius:16px;
}

/* Светлая тема (переключается скриптом через data-theme на html) */
html[data-theme="light"]{
  --bg:#f6f8ff;
  --surface:#ffffff;
  --surface-2:#eef2fb;
  --text:#0b0f1a;
  --muted:#415170;
  --primary:#2f7df6;
  --danger:#c93f52;
  --ok:#1d985f;
  --border:#dde4f5;
  --shadow:0 8px 24px rgba(0,0,0,.12);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;
  color:var(--text);
  background:radial-gradient(1200px 600px at 20% -10%, #1a2340 0%, #0b0f1a 60%) no-repeat, var(--bg);
}
html[data-theme="light"] body{
  background: radial-gradient(1000px 500px at 10% -10%, #e9efff 0%, transparent 60%), var(--bg);
}

.app-header{
  border-bottom:1px solid var(--border);
  position:sticky; top:0; backdrop-filter:saturate(1.2) blur(8px);
  background:rgba(11,15,26,.7); z-index:10;
}
html[data-theme="light"] .app-header{ background: rgba(255,255,255,.7); }

.nav{
  max-width:1100px; margin:0 auto; padding:14px 20px;
  display:flex; align-items:center; justify-content:space-between; gap:12px;
}
.nav__logo{color:#fff; text-decoration:none; font-weight:700; font-size:18px}
html[data-theme="light"] .nav__logo{ color:#0b0f1a; }

.nav__links{display:flex; gap:18px; list-style:none; margin:0; padding:0}
.nav__links a{color:var(--muted); text-decoration:none; padding:6px 10px; border-radius:10px}
.nav__links a[aria-current="page"], .nav__links a:hover{background:var(--surface-2); color:var(--text)}

.page{max-width:1100px; margin:24px auto; padding:0 20px; display:grid; gap:20px}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)) , var(--surface);
  border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
  padding:18px;
}
.card__title{margin:0 0 12px; font-size:22px}

.panel{
  display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:14px;
}
.panel__item{background:var(--surface-2); border:1px solid var(--border); border-radius:12px; padding:12px}
.label{font-size:12px; color:var(--muted); margin-bottom:6px}
.value{font-size:20px; font-weight:700}

.bet{display:flex; align-items:center; gap:8px}
.bet__input{
  width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border);
  background:#0b1120; color:var(--text); font-size:16px;
}
html[data-theme="light"] .bet__input{ background:#fff; }

.slot{
  display:grid; grid-template-columns:repeat(3, 1fr); gap:12px; margin:14px 0;
}
.reel{
  display:grid; place-items:center; height:120px; font-size:56px; line-height:1;
  border-radius:16px; border:1px solid var(--border); background:radial-gradient(220px 120px at 50% -30%, #27345d, #0c1327);
  box-shadow:inset 0 6px 18px rgba(0,0,0,.45), var(--shadow);
  transition:transform .2s ease;
}
html[data-theme="light"] .reel{
  background: radial-gradient(260px 120px at 50% -30%, #eaefff, #d9e3ff);
  box-shadow: inset 0 6px 12px rgba(0,0,0,.08), var(--shadow);
}
.reel.spin{animation:spin 1.2s cubic-bezier(.25,.6,.2,1) infinite}
@keyframes spin{
  0%{transform:translateY(0)}
  50%{transform:translateY(-10px)}
  100%{transform:translateY(0)}
}

.actions{display:flex; flex-wrap:wrap; gap:10px}
.btn{
  appearance:none; border:1px solid var(--border); background:var(--surface-2); color:var(--text);
  padding:10px 14px; border-radius:12px; cursor:pointer; transition:transform .05s ease, background .2s, color .2s, border-color .2s;
}
.btn:hover{background:#111a31}
html[data-theme="light"] .btn:hover{ background:#e9eefc; }
.btn:active{transform:translateY(1px)}
.btn--primary{background:linear-gradient(180deg, #3a86ff, #2f7df6); border-color:#1e63cf; color:#fff}
.btn--danger{background:linear-gradient(180deg, #f26a6a, #e05656); border-color:#c84141; color:#fff}
.btn--ghost{background:transparent}

.payouts{margin-top:12px}
.payouts__grid{
  display:grid; grid-template-columns:1fr auto; gap:8px 16px; padding-top:8px; border-top:1px dashed var(--border);
}

.history{list-style:none; margin:0; padding:0; display:grid; gap:8px}
.history li{
  padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:var(--surface-2);
  display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
}
.badge{padding:4px 8px; border-radius:999px; font-size:12px; border:1px solid var(--border); background:#0b1120; color:var(--text)}
.badge--win{background:rgba(41,192,126,.12); border-color:#1d8a61; color:#078853}
.badge--loss{background:rgba(224,86,86,.12); border-color:#9a3b3b; color:#b65555}

.list{margin:10px 0 0 18px}
kbd{background:#111a31; border:1px solid var(--border); border-radius:6px; padding:2px 6px; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}
html[data-theme="light"] kbd{ background:#eef2fb; }

.app-footer{max-width:1100px; margin:20px auto; padding:0 20px; color:var(--muted)}
.app-footer p{margin:0}

@media (max-width:760px){
  .panel{grid-template-columns:1fr}
  .reel{height:96px; font-size:44px}
}

/* === Route transitions === */
.route-veil{
  position:fixed; inset:0; pointer-events:none; z-index:9999;
  background: linear-gradient(120deg, #0e1630 0%, #1b2a57 50%, #0e1630 100%);
  transform: translateX(-100%);
}
.route-veil--enter{ animation: veilEnter 450ms cubic-bezier(.22,.61,.36,1) both; }
.route-veil--exit{  animation: veilExit 450ms cubic-bezier(.22,.61,.36,1) both; }
@keyframes veilEnter{ 0%{transform:translateX(0)} 100%{transform:translateX(100%)} }
@keyframes veilExit{  0%{transform:translateX(-100%)} 100%{transform:translateX(0)} }
.route-enter .page{ animation: pagePopIn 450ms cubic-bezier(.22,.61,.36,1) both; }
.route-exit .page{  animation: pageFadeOut 300ms ease both; filter: blur(2px); }
@keyframes pagePopIn{ 0%{opacity:0; transform:scale(.985)} 100%{opacity:1; transform:scale(1)} }
@keyframes pageFadeOut{0%{opacity:1; transform:scale(1)} 100%{opacity:.6; transform:scale(.985)} }

/* === Modal (банкрот) === */
.modal{ position:fixed; inset:0; display:grid; place-items:center; opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:10000; }
.modal.is-open{ opacity:1; pointer-events:auto; }
.modal__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.5); backdrop-filter: blur(3px); }
.modal__dialog{
  position:relative; width:min(520px, 92vw);
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)), var(--surface);
  border:1px solid var(--border); border-radius:16px; box-shadow: var(--shadow);
  padding:20px;
  animation: modalPop .2s ease both;
}
@keyframes modalPop{ from{transform:scale(.98); opacity:.7} to{transform:scale(1); opacity:1} }
.modal__title{ margin:0 0 8px; font-size:22px }
.modal__text{ margin:0 0 14px; color:var(--muted) }
.modal__actions{ display:flex; justify-content:flex-end; gap:10px }

/* === Blackjack styles === */
.bj-table{
  background: radial-gradient(800px 300px at 50% -80%, rgba(46,132,70,.35), transparent), var(--surface);
  border:1px solid var(--border); border-radius: var(--radius); padding:18px; box-shadow: var(--shadow);
}
.bj-row{display:flex; justify-content:center; margin:8px 0}
.bj-divider{ height:1px; background:linear-gradient(90deg, transparent, var(--border), transparent); margin:10px 0; }
.bj-hand .label{margin-bottom:8px}
.bj-cards{display:flex; gap:8px; flex-wrap:wrap; min-height:96px}
.bj-score{color:var(--muted); margin-top:6px}
.playing-card{
  width:64px; height:90px; border-radius:10px; border:1px solid var(--border);
  background:linear-gradient(180deg, #f7f7fb, #e9ecf8);
  color:#111; display:grid; grid-template-rows:auto 1fr; padding:6px; position:relative;
  box-shadow: 0 6px 14px rgba(0,0,0,.25);
}
.playing-card__rank{font-weight:700}
.playing-card__suit{position:absolute; bottom:6px; right:8px}
.playing-card--red{color:#c13030}
.playing-card--back{
  background: repeating-linear-gradient(45deg, #17305b, #17305b 8px, #0f2547 8px, #0f2547 16px);
  border-color:#102247;
}

/* === Dice styles === */
.dice-area{
  display:grid; gap:14px;
  background: radial-gradient(700px 250px at 60% -60%, rgba(180,140,60,.2), transparent) , var(--surface);
  border:1px solid var(--border); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow);
}
.dice-row{display:flex; gap:16px; align-items:center; flex-wrap:wrap}
.dice-pack{display:flex; gap:10px; align-items:center}
.die{
  width:64px; height:64px; border-radius:12px; border:1px solid var(--border);
  background:linear-gradient(180deg, #f7f7fb, #e9ecf8);
  color:#111; display:grid; place-items:center; font-size:28px; font-weight:700;
  box-shadow: 0 6px 14px rgba(0,0,0,.25);
}
.die.shake{ animation: dieShake 600ms cubic-bezier(.36,.07,.19,.97); }
@keyframes dieShake{
  10%, 90% { transform: translateX(-1px) rotate(-1deg); }
  20%, 80% { transform: translateX(2px) rotate(2deg); }
  30%, 50%, 70% { transform: translateX(-4px) rotate(-3deg); }
  40%, 60% { transform: translateX(4px) rotate(3deg); }
}

/* === Diamonds styles === */
.diamonds-board{
  display:grid; gap:6px; justify-content:start;
  background: radial-gradient(700px 250px at 50% -60%, rgba(80,160,200,.2), transparent) , var(--surface);
  border:1px solid var(--border); border-radius:var(--radius); padding:14px; box-shadow:var(--shadow);
}
.diamonds-grid{ display:grid; gap:6px; }
.cell{
  width:42px; height:42px; border-radius:10px; border:1px solid var(--border);
  background:linear-gradient(180deg,#0f1424,#0b1120); display:grid; place-items:center; font-weight:700;
  cursor:pointer; user-select:none; transition:transform .05s ease, background .2s;
  color:#c3d5ff;
}
.cell:active{ transform: translateY(1px); }
.cell.revealed{ background:#141c33; cursor:default; }
.cell.bomb{ background:linear-gradient(180deg, #2a1020, #1a0b15); color:#ff9ab4; }
.cell.safe{ color:#8fd1ff; }
.cell.flagged{ outline:2px dashed #4b6fbf; }
.diamonds-panel{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
.diamonds-legend{ color:var(--muted) }

/* ======= НОВОЕ: Переключатель темы ======= */
.theme-toggle{
  width:44px; height:44px; border-radius:12px; border:1px solid var(--border);
  background: var(--surface-2); display:grid; place-items:center; cursor:pointer;
  box-shadow: var(--shadow);
  transition: background .25s ease, border-color .25s ease, transform .15s ease;
}
.theme-toggle:hover{ background: rgba(255,255,255,.06); }
html[data-theme="light"] .theme-toggle:hover{ background: rgba(0,0,0,.05); }
.theme-toggle:active{ transform: translateY(1px); }

.theme-toggle__icon{
  width:22px; height:22px; border-radius:50%;
  background: var(--text);
  /* «луна» по умолчанию (тёмная тема): выемка псевдотенью */
  box-shadow:
    8px -8px 0 0 var(--surface-2),
    0 0 0 6px color-mix(in srgb, var(--text) 12%, transparent);
  transition: transform .35s ease, box-shadow .35s ease, background .35s ease;
}
html[data-theme="light"] .theme-toggle__icon{
  /* «солнце» с лучами */
  background: #ffc94a;
  box-shadow:
    0 0 0 6px color-mix(in srgb, #ffc94a 35%, transparent),
    0 -10px 0 0 #ffc94a,
    0 10px 0 0 #ffc94a,
    10px 0 0 0 #ffc94a,
    -10px 0 0 0 #ffc94a,
    7px 7px 0 0 #ffc94a,
    -7px 7px 0 0 #ffc94a,
    7px -7px 0 0 #ffc94a,
    -7px -7px 0 0 #ffc94a;
  transform: rotate(18deg);
}

/* ======= НОВОЕ: Таймер / Секундомер ======= */
.timer-card{ margin-top: 4px; }
.timer-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px; }
.timer-tabs{ display:flex; gap:8px; flex-wrap:wrap; }
.timer-tabs .tab{
  padding:8px 12px; border-radius:999px; border:1px solid var(--border);
  background: var(--surface-2); color: var(--text); cursor:pointer; transition:.2s;
}
.timer-tabs .tab.is-active{
  background: linear-gradient(180deg, #3a86ff, #2f7df6);
  border-color:#1e63cf; color:#fff; font-weight:700;
}

.timer-widget{ display:grid; gap:12px; }
.display-wrap{ position:relative; width:min(280px, 70vw); aspect-ratio:1; margin:8px auto; display:grid; place-items:center; }
.ring{ position:absolute; inset:0; }
.ring-bg{ fill:none; stroke:rgba(255,255,255,.08); stroke-width:10; }
html[data-theme="light"] .ring-bg{ stroke: rgba(0,0,0,.08); }
.ring-fg{
  fill:none; stroke:#ffd36e; stroke-width:10; stroke-linecap:round;
  stroke-dasharray: 339.292; /* 2πr, r=54 */
  stroke-dashoffset: 339.292;
  transform: rotate(-90deg); transform-origin: 50% 50%;
  transition: stroke-dashoffset .2s ease;
  filter: drop-shadow(0 4px 10px rgba(255,211,110,.35));
}

.display{ display:flex; align-items:flex-end; gap:6px; font-variant-numeric: tabular-nums; }
.digits{ font-size:42px; font-weight:800; letter-spacing:.4px; }
.millis{ font-size:22px; opacity:.9; transform: translateY(-2px); }

.controls{ display:grid; gap:10px; }
.timer-inputs{ display:flex; align-items:end; gap:8px; flex-wrap:wrap; justify-content:center; }
.timer-inputs label{ display:grid; gap:4px; font-size:12px; color: var(--muted); }
.timer-inputs input{
  width:84px; padding:8px; border-radius:10px; border:1px solid var(--border);
  background: #0b1120; color: var(--text);
}
html[data-theme="light"] .timer-inputs input{ background:#fff; }

.laps{ border-top:1px dashed var(--border); padding-top:10px; }
.laps-head, .laps-row{
  display:grid; grid-template-columns: 48px 1fr 1fr; gap:8px; align-items:center;
}
.laps-head{ opacity:.75; font-size:12px; margin-bottom:6px; }
.laps-body{ display:grid; gap:6px; max-height:220px; overflow:auto; padding-right:4px; }
.laps-row{
  background: var(--surface-2); padding:8px 10px; border-radius:10px; border:1px solid var(--border);
}

@media (max-width:520px){
  .digits{ font-size:36px; }
  .millis{ font-size:18px; }
  .timer-inputs input{ width:72px; }
}



/* ===========================
   ADAPTIVE / RESPONSIVE LAYER
   (добавить в самый низ файла)
   =========================== */

/* Флюидная типографика и вертикальный ритм */
html {
  /* базовый размер шрифта: от 14px до 17px в зависимости от ширины */
  font-size: clamp(14px, 1.2vw + 0.5rem, 17px);
}
.card__title {
  font-size: clamp(18px, 1.3rem, 24px);
}
.digits {
  font-size: clamp(28px, 6vw, 42px);
}
.millis {
  font-size: clamp(16px, 3.2vw, 22px);
}

/* Контейнер и отступы страницы */
.page {
  max-width: min(1100px, 94vw);
  padding-inline: clamp(12px, 3vw, 20px);
  row-gap: clamp(14px, 2.4vw, 20px);
}

/* Навигация: на узких экранах — горизонтальный скролл со снапом */
@media (max-width: 860px) {
  .nav {
    gap: 10px;
  }
  .nav__links {
    overflow-x: auto;
    white-space: nowrap;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
    padding-bottom: 4px;
    gap: 10px;
  }
  .nav__links::-webkit-scrollbar { display: none; }
  .nav__links a {
    scroll-snap-align: start;
  }
}

/* Сетка панели: 3 → 2 → 1 колонки по брейкпоинтам */
@media (max-width: 1120px) {
  .panel { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 680px) {
  .panel { grid-template-columns: 1fr; }
}

/* Слоты: гибкая высота и шрифт, 3→2→1 колонки на экстрамалых */
.slot .reel {
  /* вместо жёсткой высоты 120px — флюидная с верхним ограничением */
  height: clamp(84px, 18vw, 120px);
  font-size: clamp(34px, 9vw, 56px);
}
@media (max-width: 520px) {
  .slot { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 360px) {
  .slot { grid-template-columns: 1fr; }
}

/* История — чуть компактнее на маленьких */
@media (max-width: 560px) {
  .history li {
    gap: 6px;
    padding: 8px 10px;
  }
  .badge { font-size: 11px; padding: 3px 7px; }
}

/* Кнопки: комфортные тач-таргеты на маленьких */
@media (max-width: 560px) {
  .btn { padding: 9px 12px; border-radius: 10px; }
  .actions { gap: 8px; }
}

/* Таймер / секундомер: флюидные размеры кольца и инпутов */
.timer-card { margin-top: clamp(2px, 1vw, 6px); }
.display-wrap {
  width: min(320px, 72vw);
}
.timer-inputs input {
  width: clamp(68px, 24vw, 84px);
  padding: clamp(6px, 1.8vw, 8px);
  font-size: clamp(14px, 1rem, 16px);
}
.timer-tabs .tab {
  padding: clamp(6px, 1.2vw + 2px, 8px) clamp(10px, 2vw + 6px, 12px);
}

/* Ещё компактнее на очень малых */
@media (max-width: 420px) {
  .display { gap: 4px; }
  .timer-tabs { gap: 6px; }
}

/* Узкая высота (ландшафт телефонов): уменьшаем вертикальные поля */
@media (max-height: 520px) {
  .app-header { position: static; } /* убираем липкость, экономим высоту */
  .page { margin: 12px auto; }
  .card { padding: 14px; }
  .display-wrap { width: min(260px, 56vw); }
}

/* Очень большие экраны: чуть шире контейнер и комфортные кегли */
@media (min-width: 1440px) {
  .page { max-width: 1240px; }
  .digits { font-size: 46px; }
  .millis { font-size: 24px; }
  .slot .reel { height: 128px; font-size: 60px; }
}

/* Анимации — уважение системных настроек */
@media (prefers-reduced-motion: reduce) {
  .route-veil--enter,
  .route-veil--exit,
  .route-enter .page,
  .route-exit .page,
  .die.shake,
  .reel.spin {
    animation: none !important;
  }
  .btn, .reel, .theme-toggle, .ring-fg {
    transition: none !important;
  }
}
